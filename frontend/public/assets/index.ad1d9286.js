import{w as ie,S as R,i as j,s as T,e as p,a as d,b as $,g as G,t as x,n as I,c as K,d as V,f as u,h as q,j as de,k as fe,l as me,m as S,o as P,p as pe,q as Y,r as U,I as ge,u as O,v as b,x as B,y as M,z as H,A as ee,M as Ue,B as Je,C as X,D as Qe,E as he,O as F,F as et,G as tt,H as ve,J as _e,K as ye,L as we,N as ke,P as se,Q as be,R as le,T as re,U as nt,V as ae,W as Pe,X as xe,Y as Ie,Z as it,_ as oe,$ as st,a0 as lt,a1 as rt,a2 as at,a3 as ot}from"./vendor.2e40c840.js";const ct=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}};ct();const W=ie(null),ce=ie(0),Ce=ie(null),ze=ie(""),te=new WebSocket("ws://localhost:9002");te.addEventListener("open",function(r){console.log("Connected!",te)});te.addEventListener("message",function(r){ze.set(r.data)});const ut=r=>{te.readyState===1&&te.send(r)};function Me(r){let n,e=r[1],t,i,s,l=Ee(r);return{c(){n=p("main"),l.c(),d(n,"class","bg-gray-100 dark:bg-gray-800 svelte-1xx38m4")},m(a,o){$(a,n,o),l.m(n,null),s=!0},p(a,o){o&2&&T(e,e=a[1])?(G(),x(l,1,1,I),K(),l=Ee(a),l.c(),P(l),l.m(n,null)):l.p(a,o)},i(a){s||(P(l),de(()=>{i&&i.end(1),t=fe(n,U,{duration:350,delay:350}),t.start()}),s=!0)},o(a){x(l),t&&t.invalidate(),i=me(n,U,{duration:350}),s=!1},d(a){a&&S(n),l.d(a),a&&i&&i.end()}}}function Ee(r){let n,e,t=r[0][r[1]].text+"",i,s,l,a;return{c(){n=p("nav"),e=p("h1"),i=V(t),d(e,"class","text-gray-900 dark:text-white svelte-1xx38m4"),d(n,"class","svelte-1xx38m4")},m(o,c){$(o,n,c),u(n,e),u(e,i),a=!0},p(o,c){(!a||c&3)&&t!==(t=o[0][o[1]].text+"")&&q(i,t)},i(o){a||(de(()=>{l&&l.end(1),s=fe(n,U,{duration:350,delay:350}),s.start()}),a=!0)},o(o){s&&s.invalidate(),l=me(n,U,{duration:350}),a=!1},d(o){o&&S(n),o&&l&&l.end()}}}function dt(r){let n,e,t=r[1]!=="Home"&&Me(r);return{c(){t&&t.c(),n=pe()},m(i,s){t&&t.m(i,s),$(i,n,s),e=!0},p(i,[s]){i[1]!=="Home"?t?(t.p(i,s),s&2&&P(t,1)):(t=Me(i),t.c(),P(t,1),t.m(n.parentNode,n)):t&&(G(),x(t,1,1,()=>{t=null}),K())},i(i){e||(P(t),e=!0)},o(i){x(t),e=!1},d(i){t&&t.d(i),i&&S(n)}}}function ft(r,n,e){let t;Y(r,W,s=>e(1,t=s));let{routes:i}=n;return r.$$set=s=>{"routes"in s&&e(0,i=s.routes)},[i,t]}class mt extends R{constructor(n){super();j(this,n,ft,dt,T,{routes:0})}}function Te(r,n,e){const t=r.slice();return t[6]=n[e],t[8]=e,t}function De(r){let n,e,t,i,s,l=r[6][1].text+"",a,o,c,f,m,v;t=new ge({props:{data:r[6][1].icon,scale:"1.5"}});function g(){return r[5](r[6])}return{c(){n=p("button"),e=p("div"),O(t.$$.fragment),i=b(),s=p("span"),a=V(l),o=b(),d(e,"class","item-icon svelte-10bpcfr"),d(s,"class","item-text svelte-10bpcfr"),d(n,"class","item dark:text-gray-50 text-gray-800 dark:hover:text-gray-50 svelte-10bpcfr"),n.disabled=c=r[2]!=="RGB"&r[2]!=="SpecOverlay"&r[2]!=="Reports"&r[2]!=="SpecPicker"?!r[6][1].default:!1},m(_,k){$(_,n,k),u(n,e),B(t,e,null),u(n,i),u(n,s),u(s,a),u(n,o),f=!0,m||(v=M(n,"click",g),m=!0)},p(_,k){r=_;const w={};k&1&&(w.data=r[6][1].icon),t.$set(w),(!f||k&1)&&l!==(l=r[6][1].text+"")&&q(a,l),(!f||k&5&&c!==(c=r[2]!=="RGB"&r[2]!=="SpecOverlay"&r[2]!=="Reports"&r[2]!=="SpecPicker"?!r[6][1].default:!1))&&(n.disabled=c)},i(_){f||(P(t.$$.fragment,_),f=!0)},o(_){x(t.$$.fragment,_),f=!1},d(_){_&&S(n),H(t),m=!1,v()}}}function Oe(r){let n,e,t=r[6][1].isShown&&De(r);return{c(){t&&t.c(),n=pe()},m(i,s){t&&t.m(i,s),$(i,n,s),e=!0},p(i,s){i[6][1].isShown?t?(t.p(i,s),s&1&&P(t,1)):(t=De(i),t.c(),P(t,1),t.m(n.parentNode,n)):t&&(G(),x(t,1,1,()=>{t=null}),K())},i(i){e||(P(t),e=!0)},o(i){x(t),e=!1},d(i){t&&t.d(i),i&&S(n)}}}function pt(r){let n,e,t,i,s,l,a,o,c;s=new ge({props:{data:r[1],scale:"2.5"}});let f=Object.keys(r[0]).map(r[4]),m=[];for(let g=0;g<f.length;g+=1)m[g]=Oe(Te(r,f,g));const v=g=>x(m[g],1,1,()=>{m[g]=null});return{c(){n=p("main"),e=p("ul"),t=p("logo"),i=p("div"),O(s.$$.fragment),l=b(),a=p("span"),a.textContent="Beyond RGB",o=b();for(let g=0;g<m.length;g+=1)m[g].c();d(i,"class","logo-icon svelte-10bpcfr"),d(a,"class","logo-text svelte-10bpcfr"),d(t,"class","svelte-10bpcfr"),d(e,"class","list svelte-10bpcfr"),d(n,"class","dark:bg-gray-900 bg-gray-300 dark:text-white text-gray-800 svelte-10bpcfr")},m(g,_){$(g,n,_),u(n,e),u(e,t),u(t,i),B(s,i,null),u(t,l),u(t,a),u(e,o);for(let k=0;k<m.length;k+=1)m[k].m(e,null);c=!0},p(g,[_]){const k={};if(_&2&&(k.data=g[1]),s.$set(k),_&13){f=Object.keys(g[0]).map(g[4]);let w;for(w=0;w<f.length;w+=1){const y=Te(g,f,w);m[w]?(m[w].p(y,_),P(m[w],1)):(m[w]=Oe(y),m[w].c(),P(m[w],1),m[w].m(e,null))}for(G(),w=f.length;w<m.length;w+=1)v(w);K()}},i(g){if(!c){P(s.$$.fragment,g);for(let _=0;_<f.length;_+=1)P(m[_]);c=!0}},o(g){x(s.$$.fragment,g),m=m.filter(Boolean);for(let _=0;_<m.length;_+=1)x(m[_]);c=!1},d(g){g&&S(n),H(s),ee(m,g)}}}function gt(r,n,e){let t;Y(r,W,c=>e(2,t=c));let{routes:i}=n,{icon:s}=n;function l(c){c[0]==="Settings"?(console.log("Settings to Settings",c[1]),Ce.set(c[1].component)):W.set(c[0])}const a=c=>[c,i[c]],o=c=>l(c);return r.$$set=c=>{"routes"in c&&e(0,i=c.routes),"icon"in c&&e(1,s=c.icon)},[i,s,t,l,a,o]}class ht extends R{constructor(n){super();j(this,n,gt,pt,T,{routes:0,icon:1})}}function Be(r){let n,e,t,i,s;var l=r[0];function a(o){return{}}return l&&(e=new l(a())),{c(){n=p("div"),e&&O(e.$$.fragment),d(n,"class","page dark:bg-gray-700 bg-gray-50 svelte-1udnvu8")},m(o,c){$(o,n,c),e&&B(e,n,null),s=!0},p(o,c){if(l!==(l=o[0])){if(e){G();const f=e;x(f.$$.fragment,1,0,()=>{H(f,1)}),K()}l?(e=new l(a()),O(e.$$.fragment),P(e.$$.fragment,1),B(e,n,null)):e=null}},i(o){s||(e&&P(e.$$.fragment,o),de(()=>{i&&i.end(1),t=fe(n,U,{duration:350,delay:350}),t.start()}),s=!0)},o(o){e&&x(e.$$.fragment,o),t&&t.invalidate(),i=me(n,U,{duration:350}),s=!1},d(o){o&&S(n),e&&H(e),o&&i&&i.end()}}}function vt(r){let n=r[0],e,t,i=Be(r);return{c(){i.c(),e=pe()},m(s,l){i.m(s,l),$(s,e,l),t=!0},p(s,l){l&1&&T(n,n=s[0])?(G(),x(i,1,1,I),K(),i=Be(s),i.c(),P(i),i.m(e.parentNode,e)):i.p(s,l)},i(s){t||(P(i),t=!0)},o(s){x(i),t=!1},d(s){s&&S(e),i.d(s)}}}function _t(r){let n,e;return n=new Ue({props:{show:r[1],$$slots:{default:[vt]},$$scope:{ctx:r}}}),{c(){O(n.$$.fragment)},m(t,i){B(n,t,i),e=!0},p(t,[i]){const s={};i&2&&(s.show=t[1]),i&5&&(s.$$scope={dirty:i,ctx:t}),n.$set(s)},i(t){e||(P(n.$$.fragment,t),e=!0)},o(t){x(n.$$.fragment,t),e=!1},d(t){H(n,t)}}}function yt(r,n,e){let t;Y(r,Ce,s=>e(1,t=s));let{selectedPage:i}=n;return r.$$set=s=>{"selectedPage"in s&&e(0,i=s.selectedPage)},r.$$.update=()=>{r.$$.dirty&2&&console.log(t)},[i,t]}class wt extends R{constructor(n){super();j(this,n,yt,_t,T,{selectedPage:0})}}function kt(r){let n,e,t,i,s,l,a,o,c,f,m,v,g,_,k,w;return c=new ge({props:{data:Je,scale:"2"}}),{c(){n=p("main"),e=p("div"),t=p("h2"),t.textContent="Welcome to",i=b(),s=p("h1"),s.textContent="Beyond RGB",l=b(),a=p("h3"),a.textContent="Get started below",o=b(),O(c.$$.fragment),f=b(),m=p("button"),m.innerHTML=`Proccess
    <span class="svelte-mp5utq">Process a new Spectral Image</span>`,v=b(),g=p("button"),g.innerHTML=`View
    <span class="svelte-mp5utq">View already processed Image</span>`,d(t,"class","svelte-mp5utq"),d(s,"class","svelte-mp5utq"),d(a,"class","svelte-mp5utq"),d(e,"id","welcome"),d(e,"class","dark:text-gray-500 svelte-mp5utq"),d(m,"class","dark:bg-gray-700 dark:text-white dark:hover:bg-blue-700 dark:hover:text-white svelte-mp5utq"),d(g,"class","dark:bg-gray-700 dark:text-white dark:hover:bg-blue-700 dark:hover:text-white svelte-mp5utq"),d(n,"class","svelte-mp5utq")},m(y,C){$(y,n,C),u(n,e),u(e,t),u(e,i),u(e,s),u(e,l),u(e,a),u(e,o),B(c,e,null),u(n,f),u(n,m),u(n,v),u(n,g),_=!0,k||(w=[M(m,"click",r[0]),M(g,"click",r[1])],k=!0)},p:I,i(y){_||(P(c.$$.fragment,y),_=!0)},o(y){x(c.$$.fragment,y),_=!1},d(y){y&&S(n),H(c),k=!1,X(w)}}}function bt(r){return[()=>W.set("Preprocessing"),()=>W.set("SpecOverlay")]}class Ct extends R{constructor(n){super();j(this,n,bt,kt,T,{})}}function $t(r){let n,e,t;return{c(){n=p("main"),e=p("div"),t=p("canvas"),d(t,"class","svelte-1klp74z"),d(e,"id","image-canvas"),d(e,"class","svelte-1klp74z"),d(n,"class","dark:ring-gray-600 svelte-1klp74z")},m(i,s){$(i,n,s),u(n,e),u(e,t),r[1](t)},p:I,i:I,o:I,d(i){i&&S(n),r[1](null)}}}function St(r,n,e){let t;Qe(()=>{let s=t.getContext("2d"),l=new Image;l.src="placeholder.jpg",l.onload=function(){s.canvas.width=l.width,s.canvas.height=l.height,s.canvas.addEventListener("click",()=>{console.log("click")},!1),s.drawImage(l,0,0,l.width,l.height,0,0,l.width,l.height)}});function i(s){he[s?"unshift":"push"](()=>{t=s,e(0,t)})}return[t,i]}class ue extends R{constructor(n){super();j(this,n,St,$t,T,{})}}function Pt(r){let n,e,t,i,s,l,a,o,c,f,m,v,g;return t=new ue({}),{c(){n=p("main"),e=p("div"),O(t.$$.fragment),i=b(),s=p("div"),l=p("div"),a=V(`View Options\r
      `),o=p("p"),o.textContent="[WIP]",c=b(),f=p("p"),f.textContent="<- Use the mouse wheel to zoom and click & drag to pan",m=b(),v=p("div"),v.innerHTML=`Metadata
      <ul class="text-black dark:text-gray-50 svelte-13kt474"><li>Dimensions: 5184 x 3456</li> 
        <li>Size: 20.9 MB</li> 
        <li>Camera: EOS 60D</li> 
        <li>ISO: 100</li> 
        <li>F-stop: f/10</li> 
        <li>Exposure: 1/4 sec.</li> 
        <li>Focal length: 41mm</li></ul>`,d(e,"id","image"),d(e,"class","svelte-13kt474"),d(l,"class","box dark:bg-gray-800 bg-gray-100 text-black dark:text-gray-200 ring-1 ring-gray-300 dark:ring-gray-900 svelte-13kt474"),d(l,"id","view-options"),d(v,"class","box dark:bg-gray-800 bg-gray-100 text-black dark:text-gray-200 ring-1 ring-gray-300 dark:ring-gray-900 svelte-13kt474"),d(v,"id","metadata"),d(s,"id","side"),d(s,"class","svelte-13kt474"),d(n,"class","svelte-13kt474")},m(_,k){$(_,n,k),u(n,e),B(t,e,null),u(n,i),u(n,s),u(s,l),u(l,a),u(l,o),u(l,c),u(l,f),u(s,m),u(s,v),g=!0},p:I,i(_){g||(P(t.$$.fragment,_),g=!0)},o(_){x(t.$$.fragment,_),g=!1},d(_){_&&S(n),H(t)}}}class xt extends R{constructor(n){super();j(this,n,null,Pt,T,{})}}function It(r){let n,e,t,i,s,l,a,o,c,f;return{c(){n=p("div"),e=p("label"),t=p("p"),i=V(r[1]),s=b(),l=p("input"),a=b(),o=p("span"),d(t,"class","svelte-1k2ykp3"),d(l,"type","checkbox"),d(l,"class","peer svelte-1k2ykp3"),d(o,"class","dark:after:bg-gray-300 after:bg-white dark:peer-checked:bg-green-800 peer-checked:bg-green-400 ring-gray-200 dark:ring-gray-500 svelte-1k2ykp3"),d(e,"class","group hover:bg-green-200 dark:hover:bg-gray-900/50 svelte-1k2ykp3"),d(n,"class","bg-gray-100 dark:bg-gray-600 dark:text-white svelte-1k2ykp3")},m(m,v){$(m,n,v),u(n,e),u(e,t),u(t,i),u(e,s),u(e,l),l.checked=r[0],u(e,a),u(e,o),c||(f=M(l,"change",r[2]),c=!0)},p(m,[v]){v&2&&q(i,m[1]),v&1&&(l.checked=m[0])},i:I,o:I,d(m){m&&S(n),c=!1,f()}}}function zt(r,n,e){let{label:t="Placeholder..."}=n,{checked:i=!1}=n;function s(){i=this.checked,e(0,i)}return r.$$set=l=>{"label"in l&&e(1,t=l.label),"checked"in l&&e(0,i=l.checked)},[i,t,s]}class $e extends R{constructor(n){super();j(this,n,zt,It,T,{label:1,checked:0})}}(function(){window.console=window.console||{},window.console.assert=window.console.assert||function(){},window.console.error=window.console.error||function(){};var r=function(e){var t=this;this.images=e.images,this.startingZoom=e.zoom,this.startingPan=e.pan,this.isMobile=typeof window.orientation!="undefined"||navigator.userAgent.indexOf("IEMobile")!==-1,this.isMobile?(this.clipFactorX=.5,this.clipFactorY=.5):(this.clipFactorX=0,this.clipFactorY=0),F.EventSource.call(this);var i=e.osdOptions;i.element=e.container,this.viewer=F(i),this.viewer.canvas.style.outline="none",this.tracker=new F.MouseTracker({element:this.viewer.canvas,moveHandler:function(s){t.isMobile||t.dragClip(s.position,!0,!0)},pressHandler:function(s){if(!!t.isMobile){var l=t.getShownImages();if(!(l.length<=1)){var a=new F.Point(t.viewer.container.clientWidth*t.clipFactorX,t.viewer.container.clientHeight*t.clipFactorY),o=20;l.length===2?Math.abs(a.x-s.position.x)<o&&(t.isDraggingClipX=!0):l.length===3&&(Math.abs(a.x-s.position.x)<o&&s.position.y<a.y+o&&(t.isDraggingClipX=!0),Math.abs(a.y-s.position.y)<o&&(t.isDraggingClipY=!0))}}},releaseHandler:function(s){t.isDraggingClipX=!1,t.isDraggingClipY=!1}}),this.viewer.addHandler("viewport-change",function(){t.updateClip(),t.raiseEvent("change:viewport")}),this.viewer.addHandler("add-item-failed",function(s){t.raiseEvent("add-item-failed",s)}),this.viewer.addHandler("canvas-drag",function(s){!t.isDraggingClipX&&!t.isDraggingClipY||(s.preventDefaultAction=!0,t.dragClip(s.position,t.isDraggingClipX,t.isDraggingClipY))}),this.images.forEach(function(s,l){s.curtain={},t.viewer.addTiledImage({tileSource:s.tileSource,opacity:s.shown,success:function(a){s.curtain.tiledImage=a.item,s.curtain.tiledImage.setOpacity(s.shown?1:0),l===0&&(t.startingZoom&&t.viewer.viewport.zoomTo(t.startingZoom,null,!0),t.startingPan&&t.viewer.viewport.panTo(t.startingPan,!0)),t.updateClip()}})})};r.prototype=F.extend({destroy:function(){this.images.forEach(function(e){delete e.curtain}),this.tracker.destroy(),this.viewer.destroy()},getZoom:function(){return this.viewer.viewport.getZoom()},setZoom:function(e){this.viewer.viewport.zoomTo(e,null,!0),this.startingZoom=e},getPan:function(){return this.viewer.viewport.getCenter()},setPan:function(e){this.viewer.viewport.panTo(e,!0),this.startingPan=e},zoomIn:function(){this.viewer.viewport.zoomBy(this.viewer.zoomPerClick),this.viewer.viewport.applyConstraints()},zoomOut:function(){this.viewer.viewport.zoomBy(1/this.viewer.zoomPerClick),this.viewer.viewport.applyConstraints()},updateImageShown:function(e){e.curtain.tiledImage&&e.curtain.tiledImage.setOpacity(e.shown?1:0)},updateClip:function(){var e=new F.Point(this.viewer.container.clientWidth*this.clipFactorX,this.viewer.container.clientHeight*this.clipFactorY),t=this.viewer.viewport.pointFromPixel(e,!0),i,s,l,a,o=this.getShownImages();if(o.length>1&&(i=o[1].curtain.tiledImage,i)){s=i.getContentSize(),l=i.viewportToImageCoordinates(t);var c=Math.min(s.x,Math.max(0,l.x));a=new F.Rect(c,0,s.x-c,s.y),i.setClip(a)}if(o.length>2&&(i=o[2].curtain.tiledImage,i)){s=i.getContentSize(),l=i.viewportToImageCoordinates(t);var f=Math.min(s.y,Math.max(0,l.y));a=new F.Rect(0,f,s.x,s.y-f),i.setClip(a)}},dragClip:function(e,t,i){t&&(this.clipFactorX=e.x/this.viewer.container.clientWidth),i&&(this.clipFactorY=e.y/this.viewer.container.clientHeight),this.updateClip()},getShownImages:function(){return this.images.filter(function(e){return e.shown})}},F.EventSource.prototype);var n=function(e){var t=this;this.images=e.images,this.startingZoom=e.zoom,this.startingPan=e.pan,this.leadingImage=null,F.EventSource.call(this),this.innerContainer=document.createElement("div"),this.innerContainer.style.display="flex",this.innerContainer.style.height="100%",e.container.appendChild(this.innerContainer),this.images.forEach(function(i,s){i.sync={},i.sync.container=document.createElement("div"),i.sync.container.style.flexGrow=1,t.innerContainer.appendChild(i.sync.container),i.shown||(i.sync.container.style.display="none");var l=e.osdOptions;l.element=i.sync.container,l.tileSources=i.tileSource,i.sync.viewer=F(l),i.sync.viewer.canvas.style.outline="none",i.sync.viewer.addHandler("open",function(){if(t.startingZoom&&i.sync.viewer.viewport.zoomTo(t.startingZoom,null,!0),t.startingPan)i.sync.viewer.viewport.panTo(t.startingPan,!0);else{var o=i.sync.viewer.world.getHomeBounds(),c=new F.Point(o.x+o.width/2,o.y+o.height/2);i.sync.viewer.viewport.panTo(c,!0)}}),i.sync.viewer.addHandler("add-item-failed",function(o){t.raiseEvent("add-item-failed",o)});var a=function(){t.leadingImage&&t.leadingImage!==i||(t.leadingImage=i,t.images.forEach(function(o){o!==i&&(o.sync.viewer.viewport.zoomTo(i.sync.viewer.viewport.getZoom()),o.sync.viewer.viewport.panTo(i.sync.viewer.viewport.getCenter()))}),t.leadingImage=null)};i.sync.viewer.addHandler("zoom",function(){a()}),i.sync.viewer.addHandler("pan",function(){a()}),s===0&&i.sync.viewer.addHandler("viewport-change",function(){t.raiseEvent("change:viewport")})})};n.prototype=F.extend({destroy:function(){this.images.forEach(function(e){e.sync.container.parentNode.removeChild(e.sync.container),e.sync.viewer.destroy(),delete e.sync}),this.innerContainer.parentNode.removeChild(this.innerContainer)},getZoom:function(){var e=this.images[0].sync.viewer;return e.viewport.getZoom()},setZoom:function(e){var t=this.images[0].sync.viewer;t.viewport.zoomTo(e,null,!0),this.startingZoom=e},getPan:function(){var e=this.images[0].sync.viewer;return e.viewport.getCenter()},setPan:function(e){var t=this.images[0].sync.viewer;t.viewport.panTo(e,!0),this.startingPan=e},zoomIn:function(){var e=this.images[0].sync.viewer;e.viewport.zoomBy(e.zoomPerClick),e.viewport.applyConstraints()},zoomOut:function(){var e=this.images[0].sync.viewer;e.viewport.zoomBy(1/e.zoomPerClick),e.viewport.applyConstraints()},updateImageShown:function(e){e.sync.container.style.display=e.shown?"block":"none"}},F.EventSource.prototype),window.CurtainSyncViewer=function(e){var t=this;console.assert(e,"[CurtainSyncViewer] args is required"),console.assert(e.container,"[CurtainSyncViewer] args.container is required"),console.assert(e.images,"[CurtainSyncViewer] args.images is required"),console.assert(e.images.length>0,"[CurtainSyncViewer] args.images must have at least 1 image"),F.EventSource.call(this),this.container=e.container,this.viewportEventThrottle=e.viewportEventThrottle||250,this.lastViewportEventTime=0,this.images=[],this.osdOptions=e.osdOptions||{},this.osdOptions.showNavigationControl=!1,getComputedStyle(this.container).position==="static"&&(this.container.style.position="relative"),e.images.forEach(function(i,s){console.assert(i.key,"[CurtainSyncViewer] args.images["+s+"].key is required"),console.assert(i.tileSource,"[CurtainSyncViewer] args.images["+s+"].tileSource is required");var l={key:i.key,tileSource:i.tileSource,shown:!!i.shown};t.images.push(l)}),this.setMode(e.mode||"curtain")},window.CurtainSyncViewer.prototype=F.extend({destroy:function(){this.mode&&this.mode.destroy()},getMode:function(){return this.modeKey},setMode:function(e){var t=this;if(console.assert(e==="curtain"||e==="sync","[CurtainSyncViewer.setMode] Must have valid key."),e!==this.modeKey){this.mode&&this.mode.destroy(),this.modeKey=e;var i={container:this.container,images:this.images,zoom:this.zoom,pan:this.pan,osdOptions:F.extend({},this.osdOptions)};e==="curtain"?this.mode=new r(i):this.mode=new n(i),this.mode.addHandler("change:viewport",function(){t.handleViewportChange()}),this.mode.addHandler("add-item-failed",function(s){t.raiseEvent("open-failed",{message:s.message||"",tileSource:s.options?s.options.tileSource:void 0})}),this.raiseEvent("change:mode")}},getZoom:function(){return this.mode.getZoom()},setZoom:function(e){console.assert(typeof e=="number"&&e>0&&e<1/0,"[CurtainSyncViewer.setZoom] zoom must be a positive number"),this.mode.setZoom(e),this.handleViewportChange()},zoomIn:function(){this.mode.zoomIn(),this.handleViewportChange()},zoomOut:function(){this.mode.zoomOut(),this.handleViewportChange()},getPan:function(){return this.mode.getPan()},setPan:function(e){console.assert(typeof e=="object"&&typeof e.x=="number"&&typeof e.y=="number","[CurtainSyncViewer.setPan] pan must be an object with an x and a y"),this.mode.setPan(new F.Point(e.x,e.y)),this.handleViewportChange()},getImageShown:function(e){var t=!1;return this.images.forEach(function(i){i.key===e&&i.shown&&(t=!0)}),t},setImageShown:function(e,t){var i=this;t=!!t;var s=!1;this.images.forEach(function(l){l.key===e&&l.shown!==t&&(s=!0,l.shown=t,i.mode.updateImageShown(l))}),s&&this.raiseEvent("change:imageShown",{key:e})},handleViewportChange:function(){var e=this,t=this.getZoom(),i=this.getPan();if((this.zoom!==t||!this.pan||this.pan.x!==i.x||this.pan.y!==i.y)&&!this.viewportEventTimeout){var s=Date.now(),l=s-this.lastViewportEventTime;l<this.viewportEventThrottle?this.viewportEventTimeout=setTimeout(function(){e.viewportEventTimeout=null,e.raiseEvent("change:viewport"),e.lastViewportEventTime=Date.now()},this.viewportEventThrottle-l):(this.raiseEvent("change:viewport"),this.lastViewportEventTime=s)}this.zoom=t,this.pan=i}},F.EventSource.prototype)})();function Mt(r){let n,e,t,i,s,l,a,o,c,f,m,v,g,_,k,w;return{c(){n=p("main"),e=p("button"),t=V("useCanvas: "),i=V(r[0]),s=b(),l=p("button"),a=V("showNavigator: "),o=V(r[1]),c=b(),f=p("button"),f.textContent="curtain 2",m=b(),v=p("button"),v.textContent="curtain 3",g=b(),_=p("div"),d(e,"class","bg-red-400 cursor-not-allowed"),e.disabled=!0,d(_,"id","seadragon-viewer"),d(_,"class","svelte-11hfqjl"),d(n,"class","dark:ring-gray-600 svelte-11hfqjl")},m(y,C){$(y,n,C),u(n,e),u(e,t),u(e,i),u(n,s),u(n,l),u(l,a),u(l,o),u(n,c),u(n,f),u(n,m),u(n,v),u(n,g),u(n,_),k||(w=[M(e,"click",r[3]),M(l,"click",r[4]),M(f,"click",r[5]),M(v,"click",r[6])],k=!0)},p(y,[C]){C&1&&q(i,y[0]),C&2&&q(o,y[1])},i:I,o:I,d(y){y&&S(n),k=!1,X(w)}}}function Et(r,n,e){let t,i=!0,s=!1,l=!1,a=!1;et(()=>{o(),t=new CurtainSyncViewer({container:document.querySelector("#seadragon-viewer"),images:[{key:"my-key-1",tileSource:{type:"image",url:"https://drive.google.com/uc?id=1uOsCZn88DRzGFSJrnXWz43BYTDFPe3uK",buildPyramid:!1},shown:!0},{key:"my-key-2",tileSource:{type:"image",url:"https://drive.google.com/uc?id=1sWqU9fHkLz9C4R1-sgDmSBaTmyt-IoxV",buildPyramid:!1}},{key:"my-key-3",tileSource:{type:"image",url:"https://drive.google.com/uc?id=1sqBfSkPew2XSecz_wRAjtgupCl_58MmC",buildPyramid:!1}}],osdOptions:{showNavigator:s,useCanvas:i,showZoomControl:!1,showHomeControl:!1,showFullPageControl:!0,preserveImageSizeOnResize:!0,zoomPerScroll:1.5,visibilityRatio:.99}})});function o(){t&&(t.destroy(),t=null)}tt(()=>{o()});function c(_){t&&(_===3?a?(t.setImageShown("my-key-2",!1),t.setImageShown("my-key-3",!1),t.setMode("sync"),a=!1):(t.setImageShown("my-key-2",!0),t.setImageShown("my-key-3",!0),t.setMode("curtain"),a=!0):_===2&&(l?(t.setImageShown("my-key-2",!1),t.setMode("sync"),l=!1):(t.setImageShown("my-key-3",!1),t.setImageShown("my-key-2",!0),t.setMode("curtain"),l=!0)))}return[i,s,c,()=>e(0,i=!i),()=>e(1,s=!s),()=>c(2),()=>c(3)]}class Tt extends R{constructor(n){super();j(this,n,Et,Mt,T,{})}}function Dt(r,n,e){const t=r.slice();return t[0]=n[e],t}function Ot(r){let n,e;return n=new $e({props:{label:`Channel ${r[0]}`}}),{c(){O(n.$$.fragment)},m(t,i){B(n,t,i),e=!0},p:I,i(t){e||(P(n.$$.fragment,t),e=!0)},o(t){x(n.$$.fragment,t),e=!1},d(t){H(n,t)}}}function Bt(r){let n,e,t,i,s,l,a,o;t=new Tt({}),l=new $e({props:{label:"Truecolor"}});let c=[1,2,3,4,5,6,7,8,9,10],f=[];for(let m=0;m<10;m+=1)f[m]=Ot(Dt(r,c,m));return{c(){n=p("main"),e=p("div"),O(t.$$.fragment),i=b(),s=p("div"),O(l.$$.fragment),a=b();for(let m=0;m<10;m+=1)f[m].c();d(e,"id","image"),d(e,"class","svelte-1oy6v8x"),d(s,"id","side"),d(s,"class","svelte-1oy6v8x"),d(n,"class","svelte-1oy6v8x")},m(m,v){$(m,n,v),u(n,e),B(t,e,null),u(n,i),u(n,s),B(l,s,null),u(s,a);for(let g=0;g<10;g+=1)f[g].m(s,null);o=!0},p:I,i(m){if(!o){P(t.$$.fragment,m),P(l.$$.fragment,m);for(let v=0;v<10;v+=1)P(f[v]);o=!0}},o(m){x(t.$$.fragment,m),x(l.$$.fragment,m),f=f.filter(Boolean);for(let v=0;v<10;v+=1)x(f[v]);o=!1},d(m){m&&S(n),H(t),H(l),ee(f,m)}}}class Ht extends R{constructor(n){super();j(this,n,null,Bt,T,{})}}function He(r,n,e){const t=r.slice();return t[3]=n[e],t}function Re(r,n){let e,t=n[3].name+"",i,s,l,a=I;return{key:r,first:null,c(){e=p("card"),i=V(t),s=b(),d(e,"class","dark:bg-gray-600 svelte-1u7rock"),this.first=e},m(o,c){$(o,e,c),u(e,i),u(e,s)},p(o,c){n=o,c&1&&t!==(t=n[3].name+"")&&q(i,t)},r(){l=e.getBoundingClientRect()},f(){ve(e),a()},a(){a(),a=_e(e,l,ye,{duration:Se})},d(o){o&&S(e)}}}function Rt(r){let n,e,t=[],i=new Map,s,l,a,o=r[0];const c=f=>f[3].id;for(let f=0;f<o.length;f+=1){let m=He(r,o,f),v=c(m);i.set(v,t[f]=Re(v,m))}return{c(){n=p("main"),e=p("section");for(let f=0;f<t.length;f+=1)t[f].c();d(e,"class","svelte-1u7rock"),d(n,"class","dark:bg-blue-700/25 svelte-1u7rock")},m(f,m){$(f,n,m),u(n,e);for(let v=0;v<t.length;v+=1)t[v].m(e,null);l||(a=[we(s=ke.call(null,e,{items:r[0],flipDurationMs:Se})),M(e,"consider",r[1]),M(e,"finalize",r[2])],l=!0)},p(f,[m]){if(m&1){o=f[0];for(let v=0;v<t.length;v+=1)t[v].r();t=se(t,m,c,1,f,o,i,e,be,Re,null,He);for(let v=0;v<t.length;v+=1)t[v].a()}s&&le(s.update)&&m&1&&s.update.call(null,{items:f[0],flipDurationMs:Se})},i:I,o:I,d(f){f&&S(n);for(let m=0;m<t.length;m+=1)t[m].d();l=!1,X(a)}}}const Se=200;function jt(r,n,e){let{items:t}=n;function i(l){e(0,t=l.detail.items)}function s(l){e(0,t=l.detail.items)}return r.$$set=l=>{"items"in l&&e(0,t=l.items)},[t,i,s]}class Vt extends R{constructor(n){super();j(this,n,jt,Rt,T,{items:0})}}function je(r,n,e){const t=r.slice();return t[10]=n[e],t}function Ve(r,n,e){const t=r.slice();return t[13]=n[e],t}function Fe(r,n,e){const t=r.slice();return t[16]=n[e],t}function Ze(r,n,e){const t=r.slice();return t[19]=n[e],t}function qe(r,n){let e,t=n[19].name+"",i,s,l=I;return{key:r,first:null,c(){e=p("card"),i=V(t),d(e,"class",""+(re(n[1].length>1?"selected":"")+" svelte-j8cag6")),d(e,"style",""),this.first=e},m(a,o){$(a,e,o),u(e,i)},p(a,o){n=a,o&1&&t!==(t=n[19].name+"")&&q(i,t)},r(){s=e.getBoundingClientRect()},f(){ve(e),l()},a(){l(),l=_e(e,s,ye,{duration:J})},d(a){a&&S(e)}}}function Le(r,n){let e,t=n[16].name+"",i,s,l,a,o,c=[],f=new Map,m,v,g,_,k=n[16].items;const w=h=>h[19].id;for(let h=0;h<k.length;h+=1){let E=Ze(n,k,h),D=w(E);f.set(D,c[h]=qe(D,E))}function y(...h){return n[8](n[10],n[16],...h)}function C(...h){return n[9](n[10],n[16],...h)}return{key:r,first:null,c(){e=p("span"),i=V(t),s=b(),l=V(n[13]),a=b(),o=p("itemBox");for(let h=0;h<c.length;h+=1)c[h].c();d(e,"class","svelte-j8cag6"),d(o,"class",m=""+(re("strict")+" svelte-j8cag6")),this.first=e},m(h,E){$(h,e,E),u(e,i),u(e,s),u(e,l),$(h,a,E),$(h,o,E);for(let D=0;D<c.length;D+=1)c[D].m(o,null);g||(_=[we(v=ke.call(null,o,{items:n[16].items,flipDurationMs:J})),M(o,"consider",y),M(o,"finalize",C)],g=!0)},p(h,E){if(n=h,E&1&&t!==(t=n[16].name+"")&&q(i,t),E&3){k=n[16].items;for(let D=0;D<c.length;D+=1)c[D].r();c=se(c,E,w,1,n,k,f,o,be,qe,null,Ze);for(let D=0;D<c.length;D+=1)c[D].a()}v&&le(v.update)&&E&1&&v.update.call(null,{items:n[16].items,flipDurationMs:J})},d(h){h&&S(e),h&&S(a),h&&S(o);for(let E=0;E<c.length;E+=1)c[E].d();g=!1,X(_)}}}function Ae(r){let n,e=[],t=new Map,i,s=r[10].fields;const l=a=>a[16].name;for(let a=0;a<s.length;a+=1){let o=Fe(r,s,a),c=l(o);t.set(c,e[a]=Le(c,o))}return{c(){n=p("item");for(let a=0;a<e.length;a+=1)e[a].c();i=b(),d(n,"class","svelte-j8cag6")},m(a,o){$(a,n,o);for(let c=0;c<e.length;c+=1)e[c].m(n,null);u(n,i)},p(a,o){o&51&&(s=a[10].fields,e=se(e,o,l,1,a,s,t,n,nt,Le,i,Fe))},d(a){a&&S(n);for(let o=0;o<e.length;o+=1)e[o].d()}}}function Ne(r,n){let e,t,i=n[10].name+"",s,l,a,o,c,f,m,v=I,g,_,k=["A","B"],w=[];for(let y=0;y<2;y+=1)w[y]=Ae(Ve(n,k,y));return{key:r,first:null,c(){e=p("div"),t=p("h1"),s=V(i),l=b(),a=p("button"),a.textContent="X",o=b(),c=p("div");for(let y=0;y<2;y+=1)w[y].c();f=b(),d(a,"id","removeBtn"),d(a,"class","dark:hover:bg-red-400/50 svelte-j8cag6"),d(c,"class","flex"),d(e,"class","column dark:bg-blue-700/25 bg-blue-200 svelte-j8cag6"),this.first=e},m(y,C){$(y,e,C),u(e,t),u(t,s),u(e,l),u(e,a),u(e,o),u(e,c);for(let h=0;h<2;h+=1)w[h].m(c,null);u(e,f),g||(_=M(a,"click",function(){le(n[6](n[10].id))&&n[6](n[10].id).apply(this,arguments)}),g=!0)},p(y,C){if(n=y,C&1&&i!==(i=n[10].name+"")&&q(s,i),C&51){k=["A","B"];let h;for(h=0;h<2;h+=1){const E=Ve(n,k,h);w[h]?w[h].p(E,C):(w[h]=Ae(E),w[h].c(),w[h].m(c,null))}for(;h<2;h+=1)w[h].d(1)}},r(){m=e.getBoundingClientRect()},f(){ve(e),v()},a(){v(),v=_e(e,m,ye,{duration:J*2})},d(y){y&&S(e),ee(w,y),g=!1,_()}}}function Ft(r){let n,e,t,i,s,l,a,o,c=[],f=new Map,m,v,g,_;t=new Vt({props:{items:r[1]}});let k=r[0];const w=y=>y[10].id;for(let y=0;y<k.length;y+=1){let C=je(r,k,y),h=w(C);f.set(h,c[y]=Ne(h,C))}return{c(){n=p("main"),e=p("div"),O(t.$$.fragment),i=b(),s=p("div"),l=p("button"),l.textContent="+",a=b(),o=p("section");for(let y=0;y<c.length;y+=1)c[y].c();d(e,"id","heap"),d(e,"class","svelte-j8cag6"),d(l,"id","addBtn"),d(l,"class","dark:hover:bg-green-400/50 svelte-j8cag6"),d(o,"class","svelte-j8cag6"),d(s,"id","cols"),d(s,"class","svelte-j8cag6"),d(n,"class","svelte-j8cag6")},m(y,C){$(y,n,C),u(n,e),B(t,e,null),u(n,i),u(n,s),u(s,l),u(s,a),u(s,o);for(let h=0;h<c.length;h+=1)c[h].m(o,null);v=!0,g||(_=[M(l,"click",r[7]),we(m=ke.call(null,o,{items:r[0],flipDurationMs:J,type:"col"})),M(o,"consider",r[2]),M(o,"finalize",r[3])],g=!0)},p(y,[C]){if(C&115){k=y[0];for(let h=0;h<c.length;h+=1)c[h].r();c=se(c,C,w,1,y,k,f,o,be,Ne,null,je);for(let h=0;h<c.length;h+=1)c[h].a()}m&&le(m.update)&&C&1&&m.update.call(null,{items:y[0],flipDurationMs:J,type:"col"})},i(y){v||(P(t.$$.fragment,y),v=!0)},o(y){x(t.$$.fragment,y),v=!1},d(y){y&&S(n),H(t);for(let C=0;C<c.length;C+=1)c[C].d();g=!1,X(_)}}}const J=150;function Zt(r,n,e){let t=[{id:1,name:"item1"},{id:2,name:"item2"},{id:3,name:"item3"},{id:4,name:"item4"},{id:5,name:"item5"},{id:6,name:"item6"},{id:7,name:"item7"},{id:8,name:"item8"},{id:9,name:"item9"},{id:10,name:"item10"},{id:11,name:"item11"},{id:12,name:"item12"},{id:13,name:"item13"},{id:14,name:"item14"},{id:15,name:"item15"},{id:16,name:"item16"}],i=[{id:20,name:"Art 1",fields:[{name:"Image",items:[]},{name:"Whitefield",items:[]},{name:"Darkfield",items:[]}]},{id:21,name:"Art 2",fields:[{name:"Image",items:[]},{name:"Whitefield",items:[]},{name:"Darkfield",items:[]}]},{id:22,name:"Art 3",fields:[{name:"Image",items:[]},{name:"Whitefield",items:[]},{name:"Darkfield",items:[]}]}];function s(g){console.log(g.detail),e(0,i=g.detail.items)}function l(g){e(0,i=g.detail.items)}function a(g,_,k){const w=i.findIndex(C=>C.id===g),y=i[w].fields.findIndex(C=>C.name===_);e(0,i[w].fields[y].items=k.detail.items,i),e(0,i=[...i])}function o(g,_,k){const w=i.findIndex(C=>C.id===g),y=i[w].fields.findIndex(C=>C.name===_);e(0,i[w].fields[y].items=k.detail.items,i),e(0,i=[...i])}function c(g){const _=i.findIndex(k=>k.id===g);i.splice(_,1),console.log(i),e(0,i=[...i])}function f(){e(0,i=[...i,{id:Date.now(),name:`Art ${i.length+1}`,fields:[{name:"Image",items:[]},{name:"Whitefield",items:[]},{name:"Darkfield",items:[]}]}])}return[i,t,s,l,a,o,c,f,(g,_,k)=>a(g.id,_.name,k),(g,_,k)=>o(g.id,_.name,k)]}class qt extends R{constructor(n){super();j(this,n,Zt,Ft,T,{})}}function Lt(r){let n,e,t;return{c(){n=p("input"),d(n,"type","file"),d(n,"accept","*"),n.multiple=!0,d(n,"class","svelte-itah40")},m(i,s){$(i,n,s),e||(t=M(n,"change",r[3]),e=!0)},p:I,d(i){i&&S(n),e=!1,t()}}}function At(r){let n;return{c(){n=p("input"),d(n,"id","ctrl"),d(n,"type","file"),n.multiple=!0,d(n,"webkitdirectory",""),d(n,"class","svelte-itah40")},m(e,t){$(e,n,t)},p:I,d(e){e&&S(n)}}}function Nt(r){let n,e,t,i;function s(o,c){return o[0]?At:Lt}let l=s(r),a=l(r);return{c(){n=p("main"),e=p("span"),t=V(r[1]),i=b(),a.c(),d(e,"class","selector-text svelte-itah40"),d(n,"class"," svelte-itah40")},m(o,c){$(o,n,c),u(n,e),u(e,t),u(n,i),a.m(n,null)},p(o,[c]){c&2&&q(t,o[1]),l===(l=s(o))&&a?a.p(o,c):(a.d(1),a=l(o),a&&(a.c(),a.m(n,null)))},i:I,o:I,d(o){o&&S(n),a.d()}}}function Wt(r,n,e){let{directory:t=!1}=n,{title:i=""}=n,s;function l(){s=this.files,e(2,s)}return r.$$set=a=>{"directory"in a&&e(0,t=a.directory),"title"in a&&e(1,i=a.title)},[t,i,s,l]}class We extends R{constructor(n){super();j(this,n,Wt,Nt,T,{directory:0,title:1})}}function Xt(r){let n,e,t,i,s,l,a,o,c,f,m,v,g,_,k,w,y,C;return t=new We({props:{title:"Select Files:"}}),s=new We({props:{title:"Export Destination:",directory:!0}}),c=new qt({}),{c(){n=p("main"),e=p("div"),O(t.$$.fragment),i=b(),O(s.$$.fragment),l=b(),a=p("div"),o=V(`Specify File Roles:\r
      `),O(c.$$.fragment),f=b(),m=p("br"),v=b(),g=p("div"),g.textContent="Advanced: [WIP]",_=b(),k=p("button"),k.textContent="Next",d(k,"class","next svelte-1pedr7g"),d(e,"class","settings"),d(n,"class","dark:text-white svelte-1pedr7g")},m(h,E){$(h,n,E),u(n,e),B(t,e,null),u(e,i),B(s,e,null),u(e,l),u(e,a),u(a,o),B(c,a,null),u(e,f),u(e,m),u(e,v),u(e,g),u(e,_),u(e,k),w=!0,y||(C=M(k,"click",r[0]),y=!0)},p:I,i(h){w||(P(t.$$.fragment,h),P(s.$$.fragment,h),P(c.$$.fragment,h),w=!0)},o(h){x(t.$$.fragment,h),x(s.$$.fragment,h),x(c.$$.fragment,h),w=!1},d(h){h&&S(n),H(t),H(s),H(c),y=!1,C()}}}function Yt(r){let n;const e=()=>W.set("ColorTarget");return console.log(n),[e]}class Gt extends R{constructor(n){super();j(this,n,Yt,Xt,T,{})}}function Kt(r){let n,e,t,i,s,l,a,o,c,f,m,v,g,_,k,w,y,C,h,E,D,z,A,N,Z,Q;return t=new ue({}),{c(){n=p("main"),e=p("div"),O(t.$$.fragment),i=b(),s=p("div"),l=p("div"),a=V(`Settings\r
      `),o=p("div"),c=p("div"),f=V(`Color Target\r
          `),m=p("div"),v=p("lable"),v.textContent="Rows:",g=b(),_=p("input"),k=b(),w=p("div"),y=p("lable"),y.textContent="Columns:",C=b(),h=p("input"),E=b(),D=p("button"),D.textContent="+",z=b(),A=p("button"),A.textContent="Confirm ->",d(e,"id","image"),d(e,"class","svelte-1ys5ey6"),d(v,"class","row-lable svelte-1ys5ey6"),d(_,"placeholder","Placeholder..."),d(_,"class","svelte-1ys5ey6"),d(m,"class","input-group svelte-1ys5ey6"),d(y,"class","row-lable svelte-1ys5ey6"),d(h,"placeholder","Placeholder..."),d(h,"class","svelte-1ys5ey6"),d(w,"class","input-group svelte-1ys5ey6"),d(c,"class","color-target svelte-1ys5ey6"),d(o,"class","box svelte-1ys5ey6"),d(D,"class","add svelte-1ys5ey6"),d(l,"class","settings svelte-1ys5ey6"),d(A,"class","next svelte-1ys5ey6"),d(s,"class","side svelte-1ys5ey6"),d(n,"class","svelte-1ys5ey6")},m(L,ne){$(L,n,ne),u(n,e),B(t,e,null),u(n,i),u(n,s),u(s,l),u(l,a),u(l,o),u(o,c),u(c,f),u(c,m),u(m,v),u(m,g),u(m,_),ae(_,r[0]),u(c,k),u(c,w),u(w,y),u(w,C),u(w,h),ae(h,r[0]),u(l,E),u(l,D),u(s,z),u(s,A),N=!0,Z||(Q=[M(_,"input",r[1]),M(h,"input",r[2]),M(A,"click",r[3])],Z=!0)},p(L,[ne]){ne&1&&_.value!==L[0]&&ae(_,L[0]),ne&1&&h.value!==L[0]&&ae(h,L[0])},i(L){N||(P(t.$$.fragment,L),N=!0)},o(L){x(t.$$.fragment,L),N=!1},d(L){L&&S(n),H(t),Z=!1,X(Q)}}}function Ut(r,n,e){let t="";function i(){t=this.value,e(0,t)}function s(){t=this.value,e(0,t)}return[t,i,s,()=>W.set("Process")]}class Jt extends R{constructor(n){super();j(this,n,Ut,Kt,T,{})}}function Xe(r,n,e){const t=r.slice();return t[1]=n[e],t[3]=e,t}function Qt(r){let n,e=r[1].subTitle+"",t;return{c(){n=p("h3"),t=V(e),d(n,"class","svelte-j4ig49")},m(i,s){$(i,n,s),u(n,t)},p(i,s){s&1&&e!==(e=i[1].subTitle+"")&&q(t,e)},d(i){i&&S(n)}}}function en(r){let n,e=r[1].title+"",t;return{c(){n=p("h3"),t=V(e),d(n,"class","svelte-j4ig49")},m(i,s){$(i,n,s),u(n,t)},p(i,s){s&1&&e!==(e=i[1].title+"")&&q(t,e)},d(i){i&&S(n)}}}function Ye(r){let n,e,t;function i(a,o){return a[1].subTitle==="none"?en:Qt}let s=i(r),l=s(r);return{c(){n=p("div"),l.c(),e=b(),d(n,"id","step"),d(n,"class",t=""+(re(r[1].status)+" svelte-j4ig49"))},m(a,o){$(a,n,o),l.m(n,null),u(n,e)},p(a,o){s===(s=i(a))&&l?l.p(a,o):(l.d(1),l=s(a),l&&(l.c(),l.m(n,e))),o&1&&t!==(t=""+(re(a[1].status)+" svelte-j4ig49"))&&d(n,"class",t)},d(a){a&&S(n),l.d()}}}function tn(r){let n,e=r[0],t=[];for(let i=0;i<e.length;i+=1)t[i]=Ye(Xe(r,e,i));return{c(){n=p("main");for(let i=0;i<t.length;i+=1)t[i].c();d(n,"class","svelte-j4ig49")},m(i,s){$(i,n,s);for(let l=0;l<t.length;l+=1)t[l].m(n,null)},p(i,[s]){if(s&1){e=i[0];let l;for(l=0;l<e.length;l+=1){const a=Xe(i,e,l);t[l]?t[l].p(a,s):(t[l]=Ye(a),t[l].c(),t[l].m(n,null))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},i:I,o:I,d(i){i&&S(n),ee(t,i)}}}function nn(r,n,e){let{steps:t=[]}=n;return r.$$set=i=>{"steps"in i&&e(0,t=i.steps)},r.$$.update=()=>{r.$$.dirty&1&&console.log(t)},[t]}class sn extends R{constructor(n){super();j(this,n,nn,tn,T,{steps:0})}}function ln(r){let n,e,t,i,s,l,a,o;return{c(){n=p("main"),e=p("button"),e.textContent="View",t=b(),i=p("button"),i.textContent="Open File Location",s=b(),l=p("button"),l.textContent="Exit",d(e,"class","dark:bg-gray-700 dark:hover:bg-gray-600 dark:hover:text-white dark:text-white dark:hover:ring svelte-17l6ci3"),d(i,"class","dark:bg-gray-700 dark:hover:bg-gray-600 dark:hover:text-white dark:text-white dark:hover:ring svelte-17l6ci3"),d(l,"class","dark:bg-gray-700 dark:hover:bg-gray-600 dark:hover:text-white dark:text-white dark:hover:ring svelte-17l6ci3"),d(n,"class","dark:bg-gray-600 svelte-17l6ci3")},m(c,f){$(c,n,f),u(n,e),u(n,t),u(n,i),u(n,s),u(n,l),a||(o=[M(e,"click",r[1]),M(i,"click",r[2]),M(l,"click",r[3])],a=!0)},p:I,i:I,o:I,d(c){c&&S(n),a=!1,X(o)}}}function rn(r){const{close:n}=Pe("simple-modal");function e(l){Ce.set(null),n(),W.set(l)}return[e,()=>e("SpecOverlay"),()=>e("SpecOverlay"),()=>e("SpecOverlay")]}class an extends R{constructor(n){super();j(this,n,rn,ln,T,{})}}function Ge(r,n,e){const t=r.slice();return t[9]=n[e],t}function Ke(r){let n,e=r[9]+"",t;return{c(){n=p("li"),t=V(e)},m(i,s){$(i,n,s),u(n,t)},p(i,s){s&1&&e!==(e=i[9]+"")&&q(t,e)},d(i){i&&S(n)}}}function on(r){let n,e,t,i,s,l,a,o,c,f,m,v,g,_,k,w,y;t=new ue({});let C=r[0],h=[];for(let z=0;z<C.length;z+=1)h[z]=Ke(Ge(r,C,z));function E(z){r[6](z)}let D={};return r[1]!==void 0&&(D.steps=r[1]),g=new sn({props:D}),he.push(()=>xe(g,"steps",E)),{c(){n=p("main"),e=p("div"),O(t.$$.fragment),i=b(),s=p("button"),s.textContent="[Next]",l=b(),a=p("div"),o=p("button"),o.textContent="Send to Server",c=b(),f=p("div"),m=p("ul");for(let z=0;z<h.length;z+=1)h[z].c();v=b(),O(g.$$.fragment),d(e,"id","image"),d(e,"class","svelte-w1zsh6"),d(s,"class","bg-blue-500 rounded-md px-2 py-1"),d(o,"id","send"),d(o,"class","svelte-w1zsh6"),d(f,"id","listbox"),d(f,"class","svelte-w1zsh6"),d(n,"class","svelte-w1zsh6")},m(z,A){$(z,n,A),u(n,e),B(t,e,null),u(n,i),u(n,s),u(n,l),u(n,a),u(a,o),u(a,c),u(a,f),u(f,m);for(let N=0;N<h.length;N+=1)h[N].m(m,null);u(n,v),B(g,n,null),k=!0,w||(y=[M(s,"click",r[4]),M(o,"click",r[5])],w=!0)},p(z,[A]){if(A&1){C=z[0];let Z;for(Z=0;Z<C.length;Z+=1){const Q=Ge(z,C,Z);h[Z]?h[Z].p(Q,A):(h[Z]=Ke(Q),h[Z].c(),h[Z].m(m,null))}for(;Z<h.length;Z+=1)h[Z].d(1);h.length=C.length}const N={};!_&&A&2&&(_=!0,N.steps=z[1],Ie(()=>_=!1)),g.$set(N)},i(z){k||(P(t.$$.fragment,z),P(g.$$.fragment,z),k=!0)},o(z){x(t.$$.fragment,z),x(g.$$.fragment,z),k=!1},d(z){z&&S(n),H(t),ee(h,z),H(g),w=!1,X(y)}}}function cn(r,n,e){let t;Y(r,ze,v=>e(3,t=v));let i=[],s=[{title:"Preprocess",subTitle:"none",status:"pending"},{title:"Process",subTitle:"none",status:"pending"},{title:"Export",subTitle:"none",status:"pending"}],l=0;const{open:a}=Pe("simple-modal"),o=()=>{a(an,{},{closeButton:!1})},c=()=>e(1,s[e(2,l++,l)].status="success",s),f=()=>ut("processImg");function m(v){s=v,e(1,s),e(3,t)}return r.$$.update=()=>{if(r.$$.dirty&9&&e(0,i=[...i,t]),r.$$.dirty&10){const g=/->([a-z A-Z]+)->([a-z A-Z]+)/.exec(t);if(console.log(g),g){const _=g[1]==="ImageCalibrator"?"Process":"Preprocess",k=s.findIndex(w=>w.title===_);console.log(k),e(1,s[k].subTitle=g[2],s),e(1,s=[...s])}else t.includes("PreProcessor Done")?(e(1,s[0].status="success",s),e(1,s=[...s])):t.includes("Image Calibration Done")?(e(1,s[1].status="success",s),e(1,s=[...s])):t.includes("Image Processing Done")&&(e(1,s[2].status="success",s),e(1,s=[...s]))}r.$$.dirty&4&&l===3&&o()},[i,s,l,t,c,f,m]}class un extends R{constructor(n){super();j(this,n,cn,on,T,{})}}function dn(r){let n;return{c(){n=p("main"),n.textContent="Reports"},m(e,t){$(e,n,t)},p:I,i:I,o:I,d(e){e&&S(n)}}}class fn extends R{constructor(n){super();j(this,n,null,dn,T,{})}}function mn(r){let n,e,t,i,s,l,a,o,c;return i=new ue({}),{c(){n=p("main"),e=p("div"),t=p("div"),O(i.$$.fragment),s=b(),l=p("div"),l.innerHTML=`<div class="box dark:bg-gray-800 bg-gray-100 text-black dark:text-gray-200 ring-1 ring-gray-300 dark:ring-gray-900 svelte-1s417dz" id="brush">Brush Size <p>[WIP]</p></div> 
      <div class="box dark:bg-gray-800 bg-gray-100 text-black dark:text-gray-200 ring-1 ring-gray-300 dark:ring-gray-900 svelte-1s417dz" id="refl-spec">Reflectance Spectrum
        <p>[WIP]</p></div> 
      <div class="box dark:bg-gray-800 bg-gray-100 text-black dark:text-gray-200 ring-1 ring-gray-300 dark:ring-gray-900 svelte-1s417dz" id="compare">Compare Estimated and Reference
        <p>[WIP]</p></div>`,a=b(),o=p("div"),o.textContent="Chart",d(t,"id","image"),d(t,"class","svelte-1s417dz"),d(l,"id","side"),d(l,"class","svelte-1s417dz"),d(e,"class","flex w-full justify-center h-full"),d(o,"id","chart"),d(o,"class","svelte-1s417dz"),d(n,"class","svelte-1s417dz")},m(f,m){$(f,n,m),u(n,e),u(e,t),B(i,t,null),u(e,s),u(e,l),u(n,a),u(n,o),c=!0},p:I,i(f){c||(P(i.$$.fragment,f),c=!0)},o(f){x(i.$$.fragment,f),c=!1},d(f){f&&S(n),H(i)}}}class pn extends R{constructor(n){super();j(this,n,null,mn,T,{})}}function gn(r){let n,e,t,i,s,l,a;function o(f){r[1](f)}let c={label:"Dark Mode"};return r[0]!==void 0&&(c.checked=r[0]),s=new $e({props:c}),he.push(()=>xe(s,"checked",o)),{c(){n=p("main"),e=p("h1"),e.textContent="App Settings",t=b(),i=p("div"),O(s.$$.fragment),d(i,"class","svelte-1fblrwr"),d(n,"class","svelte-1fblrwr")},m(f,m){$(f,n,m),u(n,e),u(n,t),u(n,i),B(s,i,null),a=!0},p(f,[m]){const v={};!l&&m&1&&(l=!0,v.checked=f[0],Ie(()=>l=!1)),s.$set(v)},i(f){a||(P(s.$$.fragment,f),a=!0)},o(f){x(s.$$.fragment,f),a=!1},d(f){f&&S(n),H(s)}}}function hn(r,n,e){let t;Y(r,ce,s=>e(0,t=s));function i(s){t=s,ce.set(t)}return[t,i]}class vn extends R{constructor(n){super();j(this,n,hn,gn,T,{})}}function _n(r){let n,e,t,i,s,l,a,o;return t=new mt({props:{routes:r[2]}}),s=new ht({props:{icon:it,routes:r[2]}}),a=new wt({props:{selectedPage:r[1].component}}),{c(){n=p("main"),e=p("div"),O(t.$$.fragment),i=b(),O(s.$$.fragment),l=b(),O(a.$$.fragment),d(e,"class","app"),d(n,"class",r[0])},m(c,f){$(c,n,f),u(n,e),B(t,e,null),u(e,i),B(s,e,null),u(e,l),B(a,e,null),o=!0},p(c,[f]){const m={};f&2&&(m.selectedPage=c[1].component),a.$set(m),(!o||f&1)&&d(n,"class",c[0])},i(c){o||(P(t.$$.fragment,c),P(s.$$.fragment,c),P(a.$$.fragment,c),o=!0)},o(c){x(t.$$.fragment,c),x(s.$$.fragment,c),x(a.$$.fragment,c),o=!1},d(c){c&&S(n),H(t),H(s),H(a)}}}function yn(r,n,e){let t,i,s,l;Y(r,ce,c=>e(3,s=c)),Y(r,W,c=>e(4,l=c));const a={Home:{text:"Home",component:Ct,icon:oe,isShown:!0,default:!0},RGB:{text:"Color Managed RGB Image",component:xt,icon:st,isShown:!0},SpecOverlay:{text:"Spectral Overlay",component:Ht,icon:lt,isShown:!0},Reports:{text:"Reports",component:fn,icon:rt,isShown:!0},SpecPicker:{text:"Spectral Picker",component:pn,icon:at,isShown:!0},Settings:{text:"Settings",component:vn,icon:ot,isShown:!0,default:!0},Preprocessing:{text:"Preprocessing",component:Gt,icon:oe,isShown:!1},ColorTarget:{text:"Color Target",component:Jt,icon:oe,isShown:!1},Process:{text:"Process",component:un,icon:oe,isShown:!1}};return W.set("Home"),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",c=>{ce.set(c.matches)}),r.$$.update=()=>{r.$$.dirty&16&&e(1,t=a[l]),r.$$.dirty&8&&e(0,i=s?"dark":""),r.$$.dirty&1&&(i!==""?(console.log("Theme Change"),document.documentElement.classList.add(i),document.body.classList.add(i)):(document.documentElement.classList.remove("dark"),document.body.classList.remove("dark")))},[i,t,a,s,l]}class wn extends R{constructor(n){super();j(this,n,yn,_n,T,{})}}new wn({target:document.body});
